(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"4e35":function(o,e,t){"use strict";t.r(e);var i=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"q-ma-md q-pa-md"},[t("q-tabs",{staticClass:"bg-indigo text-white",attrs:{"inline-label":""},model:{value:o.opcoes,callback:function(e){o.opcoes=e},expression:"opcoes"}},[t("q-tab",{attrs:{name:"Dados",icon:"mdi-dice-multiple",label:"Dados"}}),t("q-tab",{attrs:{name:"Repositorios",icon:"mdi-folder",label:"Repositorios"}})],1),t("q-form",{directives:[{name:"show",rawName:"v-show",value:"Dados"==o.opcoes,expression:"opcoes == 'Dados' "}]},[t("q-input",{staticClass:"q-ma-md q-pa-md",attrs:{color:"indigo",label:"Nome do Grupo"},scopedSlots:o._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-account-plus"}})]},proxy:!0}]),model:{value:o.nome,callback:function(e){o.nome=e},expression:"nome"}}),t("q-input",{staticClass:"q-ma-md q-pa-md",attrs:{type:"textarea",color:"indigo",label:"Descrição do Grupo"},model:{value:o.descricao,callback:function(e){o.descricao=e},expression:"descricao"}})],1),t("q-form",{directives:[{name:"show",rawName:"v-show",value:"Repositorios"==o.opcoes,expression:"opcoes == 'Repositorios' "}]},[t("q-list",{staticClass:"q-ma-md q-pa-md",attrs:{bordered:"",separator:""}},o._l(o.options,(function(e){return t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{clickable:""}},[t("q-item-section",[o._v(o._s(e.nome))]),t("q-item-section",[t("div",{staticClass:"q-gutter-sm"},[t("q-checkbox",{attrs:{disable:o.visitante.indexOf(e.id)>-1,val:e.id,label:"Editor"},model:{value:o.editor,callback:function(e){o.editor=e},expression:"editor"}}),t("q-checkbox",{attrs:{disable:o.editor.indexOf(e.id)>-1,val:e.id,label:"Visitante"},model:{value:o.visitante,callback:function(e){o.visitante=e},expression:"visitante"}})],1)])],1)})),1)],1),t("div",{staticClass:"row q-pa-sm q-ma-sm"},[t("div",{staticClass:"col-1 col-sm-6 col-md-9"}),t("div",{staticClass:"col-5 col-sm-3 col-md-1 q-mr-md"},[t("q-btn",{attrs:{color:"green",label:"Salvar'"},on:{click:function(e){return o.salvar()}}})],1),t("div",{staticClass:"col-4 col-sm-2 col-md-1 q-ml-md"},[t("q-btn",{attrs:{color:"red",label:"Excluir"},on:{click:function(e){return o.cancelar()}}})],1)])],1)},n=[],r=t("d624"),a=t.n(r),s=(t("551c"),t("06db"),t("097d"),t("9530")),c=t.n(s);function p(){var o=a()(["\n            query($idEmpresa: ID!) {\n              RepositorioPaiEmpresa(idEmpresa: $idEmpresa) {\n                id\n                nome\n              }\n            }\n          "]);return p=function(){return o},o}function d(){var o=a()(["\n            query($idGrupo: ID!, $idEmpresa: ID!) {\n              RepositorioPaiEmpresa(idEmpresa: $idEmpresa) {\n                id\n                nome\n              }\n              Grupo(id: $idGrupo) {\n                nome\n                descricao\n                GrupoRepositorios {\n                  Repositorio {\n                    id\n                    nome\n                  }\n                  Papel\n                }\n              }\n            }\n          "]);return d=function(){return o},o}function l(){var o=a()(["\n              mutation(\n                $nome: String!\n                $descricao: String\n                $idEmpresa: Int!\n                $repositorios: [GruposRepositoriosInput!]\n              ) {\n                createGrupo(\n                  nome: $nome\n                  descricao: $descricao\n                  idEmpresa: $idEmpresa\n                  repositorios: $repositorios\n                ) {\n                  id\n                }\n              }\n            "]);return l=function(){return o},o}function u(){var o=a()(["\n              mutation(\n                $id: ID!\n                $nome: String!\n                $descricao: String\n                $idEmpresa: Int!\n                $repositorios: [GruposRepositoriosInput!]\n              ) {\n                updateGrupo(\n                  id: $id\n                  nome: $nome\n                  descricao: $descricao\n                  idEmpresa: $idEmpresa\n                  repositorios: $repositorios\n                ) {\n                  id\n                }\n              }\n            "]);return u=function(){return o},o}var m={props:["id"],data:function(){return{opcoes:"Dados",nome:"",descricao:"",id:null,options:[],editor:[],visitante:[]}},methods:{spinner:function(o){this.$store.dispatch("layout/setVisibleSpinner",o)},salvar:function(){var o=this;if(this.spinner(!0),null!=this.id){var e=this.editor.map((function(o){return{idRepositorio:parseInt(o,10),Papel:"Editor"}})).concat(this.visitante.map((function(o){return{idRepositorio:parseInt(o,10),Papel:"Visitante"}})));this.$apollo.mutate({mutation:c()(u()),variables:{id:this.id,nome:this.nome,descricao:this.descricao,idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,repositorios:e},fetchPolicy:"no-cache"}).then((function(e){o.$q.notify({color:"green",textColor:"white",message:"Grupo atualizado com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log("error! ",e),o.$q.notify({color:"red",textColor:"white",message:"Error ao atualizar grupo!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return o.spinner(!1)}))}else{var t=this.editor.map((function(o){return{idRepositorio:o,Papel:"Editor"}})).concat(this.visitante.map((function(o){return{idRepositorio:o,Papel:"Visitante"}})));this.$apollo.mutate({mutation:c()(l()),variables:{nome:this.nome,descricao:this.descricao,idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,repositorios:t},fetchPolicy:"no-cache"}).then((function(e){o.$q.notify({color:"green",textColor:"white",message:"Grupo Criada com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log("error! ",e),o.$q.notify({color:"red",textColor:"white",message:"Error ao Criar grupo!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return o.spinner(!1)}))}}},mounted:function(){var o=this;this.spinner(!0),this.id?this.$apollo.query({query:c()(d()),variables:{idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,idGrupo:this.id},fetchPolicy:"no-cache"}).then((function(e){o.nome=e.data.Grupo.nome,o.descricao=e.data.Grupo.descricao,o.editor=e.data.Grupo.GrupoRepositorios.filter((function(o){return"Editor"==o.Papel})).map((function(o){return o.Repositorio.id})),o.visitante=e.data.Grupo.GrupoRepositorios.filter((function(o){return"Visitante"==o.Papel})).map((function(o){return o.Repositorio.id})),o.options=e.data.RepositorioPaiEmpresa,o.spinner(!1)})):this.$apollo.query({query:c()(p()),variables:{idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id},fetchPolicy:"no-cache"}).then((function(e){o.options=e.data.RepositorioPaiEmpresa,o.spinner(!1)}))}},f=m,h=t("2877"),v=t("eebe"),b=t.n(v),q=t("429b"),$=t("7460"),E=t("0378"),g=t("27f9"),x=t("0016"),y=t("1c1c"),R=t("66e5"),w=t("4074"),G=t("8f8e"),C=t("9c40"),k=t("714f"),P=Object(h["a"])(f,i,n,!1,null,null,null);e["default"]=P.exports;b()(P,"components",{QTabs:q["a"],QTab:$["a"],QForm:E["a"],QInput:g["a"],QIcon:x["a"],QList:y["a"],QItem:R["a"],QItemSection:w["a"],QCheckbox:G["a"],QBtn:C["a"]}),b()(P,"directives",{Ripple:k["a"]})}}]);