(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{e05c:function(n,e,t){"use strict";t.r(e);var o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"q-ma-md q-pa-md"},[t("q-tabs",{staticClass:"bg-indigo text-white",attrs:{"inline-label":""},model:{value:n.opcoes,callback:function(e){n.opcoes=e},expression:"opcoes"}},[t("q-tab",{attrs:{name:"Dados",icon:"mdi-dice-multiple",label:"Dados"}}),t("q-tab",{attrs:{name:"Contatos",icon:"mdi-contacts",label:"Contatos"}}),t("q-tab",{attrs:{name:"Grupo",icon:"mdi-account-plus",label:"Grupo"}})],1),t("div",{staticClass:"q-ma-md q-pa-md"},[t("q-form",{directives:[{name:"show",rawName:"v-show",value:"Dados"==n.opcoes,expression:"opcoes == 'Dados' "}]},[t("q-input",{attrs:{color:"indigo",label:"Nome",rules:[function(n){return n.length>=2&&n.length<=20||"No minimo 2 e no maximo 20 caracter!"}]},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-account"}})]},proxy:!0}]),model:{value:n.name,callback:function(e){n.name=e},expression:"name"}}),t("q-input",{attrs:{color:"indigo",label:"Sobrenome",rules:[function(n){return n.length>=5&&n.length<=255||"No minimo 5 e no maximo 255 caracter!"}]},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-account-box-outline"}})]},proxy:!0}]),model:{value:n.sobrenome,callback:function(e){n.sobrenome=e},expression:"sobrenome"}}),t("q-input",{attrs:{color:"indigo",label:"E-mail",rules:[function(n){return null!=n.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/gi)||"Por favor digite um e-mail valido!"}]},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-email-outline"}})]},proxy:!0}]),model:{value:n.email,callback:function(e){n.email=e},expression:"email"}}),t("q-input",{attrs:{color:"indigo",label:"CPF",rules:[function(n){return 11==n.length||"CPF invalido!"}],mask:"###.###.###-##","unmasked-value":""},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-barcode"}})]},proxy:!0}]),model:{value:n.cpf,callback:function(e){n.cpf=e},expression:"cpf"}}),t("q-select",{attrs:{options:n.grupos,label:"Status",rules:[function(n){return n.length>=1||"Não é um grupo valido!"}]},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-stairs"}})]},proxy:!0}]),model:{value:n.status,callback:function(e){n.status=e},expression:"status"}}),1==n.isAdmin?t("q-input",{attrs:{color:"indigo",label:"Admin",mask:"#","unmasked-value":""},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-numeric-1-box-outline"}})]},proxy:!0}],null,!1,889557891),model:{value:n.admin,callback:function(e){n.admin=e},expression:"admin"}}):n._e(),n.id?n._e():t("q-input",{attrs:{color:"indigo",label:"Senha",type:"password"},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"mdi-lock"}})]},proxy:!0}],null,!1,2838460266),model:{value:n.senha,callback:function(e){n.senha=e},expression:"senha"}})],1),"Contatos"==n.opcoes?t("q-form",[n._l(n.telefones,(function(e,o){return t("div",{key:o,staticClass:"row"},[t("div",{staticClass:"col-10"},[t("q-input",{attrs:{color:"indigo",label:"Telefone",rules:[function(n){return(10==n.length||11==n.length)&&n.match(/^[0-9]+$/)||"Formato Telefone Invalido!"}]},scopedSlots:n._u([{key:"prepend",fn:function(){return[t("q-icon",{staticClass:"gt-sm",attrs:{name:"mdi-cellphone-android"}})]},proxy:!0}],null,!0),model:{value:e.numero,callback:function(t){n.$set(e,"numero",t)},expression:"tel.numero"}})],1),t("div",{staticClass:"col-2 q-pa-lg"},[t("q-btn",{attrs:{round:"",color:"red",icon:"mdi-delete"},on:{click:function(e){return n.removeTel(o)}}})],1)])})),t("div",{staticClass:"row"},[t("div",{staticClass:"col-9 col-sm-10"}),t("div",{staticClass:"col-2 q-pl-lg"},[t("q-btn",{attrs:{round:"",color:"indigo",icon:"mdi-phone-plus"},on:{click:function(e){return n.addTel()}}})],1)])],2):n._e(),"Grupo"==n.opcoes?t("q-form",[t("div",{staticClass:"col-9 col-sm-10 q-pa-md"},[0==n.optionsGrupos.length?[n._v("Desculpe sua empresa não possuir nenhum grupo.")]:[t("q-option-group",{attrs:{options:n.optionsGrupos,label:"Grupos",type:"checkbox"},model:{value:n.grupo,callback:function(e){n.grupo=e},expression:"grupo"}})]],2)]):n._e(),t("div",{staticClass:"row q-pa-sm q-ma-sm"},[t("div",{staticClass:"col-1 col-sm-6 col-md-9"}),t("div",{staticClass:"col-5 col-sm-3 col-md-1 q-mr-md"},[t("q-btn",{attrs:{color:"green",label:"Salvar"},on:{click:function(e){return n.salvar()}}})],1),t("div",{staticClass:"col-4 col-sm-2 col-md-1 q-ml-md"},[t("q-btn",{attrs:{color:"red",label:"Excluir"},on:{click:function(e){return n.excluir()}}})],1)])],1)],1)},s=[],a=(t("7f7f"),t("d624")),i=t.n(a),r=(t("551c"),t("06db"),t("097d"),t("9530")),l=t.n(r);function u(){var n=i()(["\n            query($idEmpresa: ID!) {\n              GrupoEmpresa(idEmpresa: $idEmpresa) {\n                id\n                nome\n                descricao\n                idEmpresa\n                Empresa {\n                  id\n                  cnpj\n                  razaoSocial\n                  nomeFantasia\n                  status\n                  dataSuspensao\n                }\n              }\n            }\n          "]);return u=function(){return n},n}function c(){var n=i()(["\n            query($idEmpresa: ID!, $id: ID!) {\n              GrupoEmpresa(idEmpresa: $idEmpresa) {\n                id\n                nome\n                descricao\n                idEmpresa\n                Empresa {\n                  id\n                  cnpj\n                  razaoSocial\n                  nomeFantasia\n                  status\n                  dataSuspensao\n                }\n              }\n              user(id: $id) {\n                name\n                sobrenome\n                email\n                cpf\n                admin\n                status\n                telefones {\n                  numero\n                }\n                grupos {\n                  id\n                }\n              }\n            }\n          "]);return c=function(){return n},n}function m(){var n=i()(["\n                mutation(\n                  $name: String!\n                  $sobrenome: String!\n                  $cpf: String!\n                  $admin: Int\n                  $email: String!\n                  $password: String!\n                  $grupos: [Int!]\n                  $telefones: [TelefoneInput!]!\n                  $status: StatusUser!\n                ) {\n                  createUser(\n                    name: $name\n                    sobrenome: $sobrenome\n                    cpf: $cpf\n                    admin: $admin\n                    email: $email\n                    password: $password\n                    status: $status\n                    grupos: $grupos\n                    telefones: $telefones\n                  ) {\n                    id\n                  }\n                }\n              "]);return m=function(){return n},n}function p(){var n=i()(["\n                mutation(\n                  $id: ID!\n                  $name: String\n                  $sobrenome: String\n                  $cpf: String\n                  $admin: Int\n                  $email: String\n                  $grupos: [Int!]\n                  $telefones: [TelefoneInput!]\n                  $status: StatusUser\n                ) {\n                  updateUser(\n                    id: $id\n                    name: $name\n                    status: $status\n                    sobrenome: $sobrenome\n                    cpf: $cpf\n                    admin: $admin\n                    email: $email\n                    grupos: $grupos\n                    telefones: $telefones\n                  ) {\n                    id\n                  }\n                }\n              "]);return p=function(){return n},n}var d={props:["id"],data:function(){return{opcoes:"Dados",name:"",sobrenome:"",cpf:"",email:"",admin:0,senha:"",grupo:[],telefones:[{numero:""}],grupos:["Ativo","Inativo"],status:"Ativo"}},computed:{isAdmin:function(){return this.$store.getters["auth/isAdmin"]},optionsGrupos:function(){var n=this.$store.getters["auth/getEmpresaAtual"];return this.$store.getters["auth/getGrupos"].filter((function(e){return e.idEmpresa==n.id})).map((function(n){return{label:n.nome,value:n.id}}))}},methods:{spinner:function(n){this.$store.dispatch("layout/setVisibleSpinner",n)},addTel:function(){this.telefones.push({numero:""})},removeTel:function(n){this.telefones.length>1&&this.telefones.splice(n,1)},salvar:function(){var n=this;this.spinner(!0),this.grupo.length>=1||1==this.isAdmin?this.id?this.$apollo.mutate({mutation:l()(p()),variables:{id:this.id,name:this.name,sobrenome:this.sobrenome,cpf:this.cpf,admin:1==this.isAdmin?this.admin:0,email:this.email,grupos:this.grupo,telefones:this.telefones.map((function(n){return{numero:n.numero,id:n.id}})),status:this.status},fetchPolicy:"no-cache"}).then((function(e){n.$q.notify({color:"green",textColor:"white",message:"Usuario Criada com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log("error! ",e),n.$q.notify({color:"red",textColor:"white",message:"Error ao Criar usuario!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){n.spinner(!1)})):this.$apollo.mutate({mutation:l()(m()),variables:{name:this.name,sobrenome:this.sobrenome,cpf:this.cpf,admin:1==this.isAdmin?this.admin:0,email:this.email,password:this.senha,grupos:this.grupo,telefones:this.telefones,status:this.status},fetchPolicy:"no-cache"}).then((function(e){n.$q.notify({color:"green",textColor:"white",message:"Usuario Criada com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log("error! ",e),n.$q.notify({color:"red",textColor:"white",message:"Error ao Criar usuario!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){n.spinner(!1)})):(this.$q.notify({color:"red",textColor:"white",message:"Desculpe não é possivel criar usuario sem pertencer a nenhum grupo!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),this.spinner(!1))}},mounted:function(){var n=this;this.spinner(!0),this.id?this.$apollo.query({query:l()(c()),variables:{idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,id:this.id},fetchPolicy:"no-cache"}).then((function(e){n.$store.dispatch("auth/setGrupos",e.data.GrupoEmpresa),n.name=e.data.user.name,n.sobrenome=e.data.user.sobrenome,n.email=e.data.user.email,n.cpf=e.data.user.cpf,n.admin=e.data.user.admin,n.telefones=e.data.user.telefones,n.grupo=e.data.user.grupos.map((function(n){return n.id})),n.status=e.data.user.status,n.spinner(!1)})):this.$apollo.query({query:l()(u()),variables:{idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id},fetchPolicy:"no-cache"}).then((function(e){n.$store.dispatch("auth/setGrupos",e.data.GrupoEmpresa),n.spinner(!1)}))}},f=d,h=t("2877"),g=t("eebe"),b=t.n(g),$=t("429b"),v=t("7460"),q=t("0378"),y=t("27f9"),x=t("0016"),k=t("ddd8"),S=t("9c40"),C=t("9f0a"),E=Object(h["a"])(f,o,s,!1,null,null,null);e["default"]=E.exports;b()(E,"components",{QTabs:$["a"],QTab:v["a"],QForm:q["a"],QInput:y["a"],QIcon:x["a"],QSelect:k["a"],QBtn:S["a"],QOptionGroup:C["a"]})}}]);