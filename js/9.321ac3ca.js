(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{2573:function(t,e,o){},"4bcb":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR fFf"}},[o("Spinner"),o("q-header",{staticClass:"bg-blue-6 text-white-8 q-py-xs",attrs:{elevated:"","height-hint":"58"}},[o("q-toolbar",[o("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),t.$q.screen.gt.xs?o("q-btn",{staticClass:"q-ml-xs",attrs:{flat:"","no-caps":"","no-wrap":""}},[o("q-icon",{attrs:{name:"img:statics/logo/HDoc.jpg",size:"40px"}}),o("q-toolbar-title",{staticClass:"text-weight-bold",attrs:{shrink:""}},[t._v("HDOC")])],1):t._e(),o("q-space"),o("Search"),o("q-space"),o("div",{staticClass:"q-gutter-sm row items-center no-wrap"},[o("Opcoes",{attrs:{selected:t.selected}}),o("Nome")],1)],1)],1),o("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2",width:240},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[o("q-scroll-area",{staticClass:"fit"},[o("q-list",{attrs:{padding:""}},[o("q-expansion-item",{attrs:{group:"principal",flat:"",icon:"mdi-archive","header-class":"text-blue-6",label:"Documentos"}},[o("q-list",[1==t.admin||1==t.responsavel?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:"/cadastro"}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{staticClass:"text-blue-6",attrs:{name:"mdi-folder-account"}})],1),o("q-item-section",[o("q-item-label",[t._v("Cadastro")])],1)],1):t._e(),1==t.admin||1==t.responsavel?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:"/seguranca"}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{staticClass:"text-blue-6",attrs:{name:"mdi-security"}})],1),o("q-item-section",[o("q-item-label",[t._v("Segurança")])],1)],1):t._e(),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",to:"/dashboard"}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{staticClass:"text-blue-6",attrs:{name:"mdi-chart-pie"}})],1),o("q-item-section",[o("q-item-label",[t._v("Dashboard")])],1)],1)],1)],1),o("q-separator",{staticClass:"q-my-md"}),o("Expansion",{attrs:{pastas:t.pastas,caminho:t.caminho}})],1)],1)],1),o("q-page-container",[o("router-view",{on:{selected:function(e){t.selected=e}}})],1)],1)},a=[],n=o("9530"),s=o.n(n),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t._l(t.pastas,(function(e){return o("div",{key:e.id},[e.children.length>=1?o("div",[e.id==t.caminho[0]?o("div",[o("q-expansion-item",{attrs:{"default-opened":"",icon:"mdi-folder",label:e.nome,"header-class":"text-red-9"},on:{mouseover:function(o){return t.idSelecionado(e)},click:function(o){return t.pastaAtual(e.id,e.nome)}}},[o("q-card-section",[o("Expansion",{attrs:{pastas:e.children,caminho:t.novoCaminho}})],1)],1)],1):o("div",[o("q-expansion-item",{attrs:{icon:"mdi-folder",label:e.nome,"header-class":"text-indigo-6"},on:{mouseover:function(o){return t.idSelecionado(e)},click:function(o){return t.pastaAtual(e.id,e.nome)}}},[o("q-card-section",[o("Expansion",{attrs:{pastas:e.children,caminho:t.novoCaminho}})],1)],1)],1)]):o("div",[e.id==t.caminho[0]?o("div",[o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-red-9",attrs:{clickable:""},on:{mouseover:function(o){return t.idSelecionado(e)},click:function(o){return t.pastaAtual(e.id,e.nome)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"mdi-folder"}})],1),o("q-item-section",[t._v(t._s(e.nome))])],1)],1):o("div",[o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-yellow-9",attrs:{clickable:""},on:{mouseover:function(o){return t.idSelecionado(e)},click:function(o){return t.pastaAtual(e.id,e.nome)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"mdi-folder"}})],1),o("q-item-section",[t._v(t._s(e.nome))])],1)],1)])])})),o("q-menu",{attrs:{"touch-position":"","context-menu":""}},[o("q-list",{staticStyle:{"min-width":"100px"}},[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.NewPasta}},[o("q-item-section",[t._v("Nova Pasta")])],1),o("q-separator"),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.EditPasta}},[o("q-item-section",[t._v("Editar Pasta")])],1),o("q-separator"),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.ExcluirPasta}},[o("q-item-section",[t._v("Excluir Pasta")])],1)],1)],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("q-card",{staticClass:"my-card"},[o("q-card-section",{staticClass:"bg-primary text-white"},[o("div",{staticClass:"text-h6"},[t._v(t._s(t.tituloModal))])]),o("q-input",{staticClass:"q-pa-sm",attrs:{label:"Nome"},model:{value:t.nome,callback:function(e){t.nome=e},expression:"nome"}}),o("q-input",{staticClass:"q-pa-sm",attrs:{label:"Descrição",type:"textarea"},model:{value:t.descricao,callback:function(e){t.descricao=e},expression:"descricao"}}),o("q-separator"),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Confirma",color:"primary"},on:{click:t.salvar}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"red"},on:{click:t.cancelar}})],1)],1)],1)],2)},c=[],l=o("d624"),u=o.n(l),d=o("4db1"),p=o.n(d);function m(){var t=u()(["\n              query($idRepositorio: ID!) {\n                caminhoRepositorio(id: $idRepositorio)\n              }\n            "]);return m=function(){return t},t}function h(){var t=u()(["\n                          query($idRepositorio: ID!) {\n                            caminhoRepositorio(id: $idRepositorio)\n                          }\n                        "]);return h=function(){return t},t}function f(){var t=u()(["\n              query($idRepositorio: ID!) {\n                caminhoRepositorio(id: $idRepositorio)\n              }\n            "]);return f=function(){return t},t}function v(){var t=u()(["\n              query($idRepositorio: ID!) {\n                caminhoRepositorio(id: $idRepositorio)\n              }\n            "]);return v=function(){return t},t}function q(){var t=u()(["\n                    mutation($id: ID!) {\n                      deleteRepositorio(id: $id) {\n                        id\n                      }\n                    }\n                  "]);return q=function(){return t},t}function g(){var t=u()(["\n              query($idRepositorio: ID!) {\n                arquivosRepositorio(idRepositorio: $idRepositorio) {\n                  id\n                  nome\n                }\n                Repositorio(id: $idRepositorio) {\n                  id\n                  nome\n                  Filhos {\n                    id\n                    nome\n                  }\n                }\n              }\n            "]);return g=function(){return t},t}function b(){var t=u()(["\n                                mutation($id: ID!) {\n                                  deleteRepositorio(id: $id) {\n                                    id\n                                  }\n                                }\n                              "]);return b=function(){return t},t}function $(){var t=u()(["\n                          query($idRepositorio: ID!) {\n                            arquivosRepositorio(idRepositorio: $idRepositorio) {\n                              id\n                              nome\n                            }\n                            Repositorio(id: $idRepositorio) {\n                              id\n                              nome\n                              Filhos {\n                                id\n                                nome\n                              }\n                            }\n                          }\n                        "]);return $=function(){return t},t}function x(){var t=u()(["\n              query($idRepositorio: ID!) {\n                caminhoRepositorio(id: $idRepositorio)\n              }\n            "]);return x=function(){return t},t}function y(){var t=u()(["\n              mutation(\n                $id: ID!\n                $nome: String!\n                $descricao: String\n                $idEmpresa: Int!\n                $idRepositorio: Int\n              ) {\n                updateRepositorio(\n                  id: $id\n                  nome: $nome\n                  descricao: $descricao\n                  idEmpresa: $idEmpresa\n                  idRepositorio: $idRepositorio\n                ) {\n                  id\n                }\n              }\n            "]);return y=function(){return t},t}function w(){var t=u()(["\n              mutation(\n                $nome: String!\n                $descricao: String\n                $idEmpresa: Int!\n                $idRepositorio: Int\n              ) {\n                createRepositorio(\n                  nome: $nome\n                  descricao: $descricao\n                  idEmpresa: $idEmpresa\n                  idRepositorio: $idRepositorio\n                ) {\n                  id\n                }\n              }\n            "]);return w=function(){return t},t}var C={name:"Expansion",props:["pastas","caminho"],data:function(){return{modal:!1,tituloModal:"",nome:"",descricao:"",acao:"",caminho:[]}},computed:{admin:function(){return this.$store.getters["auth/isAdmin"]},responsavel:function(){return this.$store.getters["auth/isResponsavel"]},idAtual:function(){return this.$store.getters["pastas/getPastaAtual"].id},repositorio_nome:function(){return this.$store.getters["pastas/getPastaAtual"].nome},repositorio_descricao:function(){return this.$store.getters["pastas/getPastaAtual"].descricao},novoCaminho:function(){if(Array.isArray(this.caminho)){var t=p()(this.caminho);return t.splice(0,1),t}return[]}},methods:{cancelar:function(){this.nome="",this.descricao="",this.caminho=[],this.acao=""},salvar:function(){var t=this;"novo"==this.acao?(this.$apollo.mutate({mutation:s()(w()),variables:{nome:this.nome,descricao:this.descricao,idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,idRepositorio:this.idAtual}}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Pasta Criado com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.UpdatePastas()})).catch((function(e){console.log("error! ",e),t.$q.notify({color:"red",textColor:"white",message:"Error ao criar pasta!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})),this.cancelar):"edit"==this.acao&&(this.$apollo.mutate({mutation:s()(y()),variables:{id:this.idAtual,nome:this.nome,descricao:this.descricao,idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id,idRepositorio:this.caminho.slice(this.caminho.length-2,this.caminho.length-1)[0]>0?this.caminho.slice(this.caminho.length-2,this.caminho.length-1)[0]:null}}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Pasta atualizada com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.UpdatePastas()})).catch((function(e){console.log("error! ",e),t.$q.notify({color:"red",textColor:"white",message:"Error ao atualizar pasta!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})),this.cancelar)},ExcluirPasta:function(){var t=this;if(0==this.admin&&0==this.responsavel){var e=!1;this.$apollo.query({query:s()(x()),variables:{idRepositorio:this.idAtual},fetchPolicy:"no-cache"}).then((function(o){t.caminho=o.data.caminhoRepositorio,t.$store.getters["auth/getGrupos"].filter((function(e){return e.Empresa.id==t.$store.getters["auth/getEmpresaAtual"].id})).forEach((function(i){i.GrupoRepositorios.forEach((function(i){o.data.caminhoRepositorio.indexOf(parseInt(i.Repositorio.id))>-1&&"Editor"==i.Papel&&(e=!0,t.$apollo.query({query:s()($()),variables:{idRepositorio:t.idAtual}}).then((function(e){e.data.arquivosRepositorio.length>0?t.$q.notify({color:"red",textColor:"white",message:"Desculpe não é possivel excluir uma pasta que possui arquivos!",position:"bottom-left",timeout:5e3*Math.random()+3e3}):e.data.Repositorio.Filhos.length>0?t.$q.notify({color:"red",textColor:"white",message:"Desculpe não é possivel excluir uma pasta que tenha subpastas!",position:"bottom-left",timeout:5e3*Math.random()+3e3}):t.$apollo.mutate({mutation:s()(b()),variables:{id:t.idAtual}}).then((function(e){t.UpdatePastas(),t.$q.notify({color:"green",textColor:"white",message:"Pasta Excluida com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log(e),t.$q.notify({color:"red",textColor:"white",message:"Error ao excluir a pasta, Por favor verefique se não possuir nenhum grupo que utiliza ela!",position:"bottom-left",timeout:5e3*Math.random()+3e3})}))})))}))})),0==e&&alert("Desculpe, não possuir permição nessa Pasta!")}))}else this.$apollo.query({query:s()(g()),variables:{idRepositorio:this.idAtual}}).then((function(e){e.data.arquivosRepositorio.length>0?t.$q.notify({color:"red",textColor:"white",message:"Desculpe não é possivel excluir uma pasta que possui arquivos!",position:"bottom-left",timeout:5e3*Math.random()+3e3}):e.data.Repositorio.Filhos.length>0?t.$q.notify({color:"red",textColor:"white",message:"Desculpe não é possivel excluir uma pasta que tenha subpastas!",position:"bottom-left",timeout:5e3*Math.random()+3e3}):t.$apollo.mutate({mutation:s()(q()),variables:{id:t.idAtual}}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Pasta Excluida com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.UpdatePastas()})).catch((function(e){t.$q.notify({color:"red",textColor:"white",message:"Error ao excluir a pasta, Por favor verefique se não possuir nenhum grupo que utiliza ela!",position:"bottom-left",timeout:5e3*Math.random()+3e3})}))}))},idSelecionado:function(t){this.$store.dispatch("pastas/setPastaAtual",t)},pastaAtual:function(t,e){this.$store.dispatch("pastas/setPastaSelecionada",this.$store.getters["pastas/getPastaAtual"]),this.$router.push({name:"Repositorio",params:{pasta:e,id:t}})},NewPasta:function(){var t=this;0==this.admin&&0==this.responsavel?this.$apollo.query({query:s()(v()),variables:{idRepositorio:this.idAtual},fetchPolicy:"no-cache"}).then((function(e){t.caminho=e.data.caminhoRepositorio,t.$store.getters["auth/getGrupos"].filter((function(e){return e.Empresa.id==t.$store.getters["auth/getEmpresaAtual"].id})).forEach((function(o){o.GrupoRepositorios.forEach((function(o){e.data.caminhoRepositorio.indexOf(parseInt(o.Repositorio.id))>-1&&"Editor"==o.Papel&&(t.acao="novo",t.tituloModal="Adiciona novo repositorio em "+t.repositorio_nome,t.modal=!0)}))})),0==t.modal&&alert("Desculpe, não possuir permição nessa Pasta!")})):(this.acao="novo",this.tituloModal="Adiciona novo repositorio em "+this.repositorio_nome,this.modal=!0)},EditPasta:function(){var t=this;0==this.admin&&0==this.responsavel?this.$apollo.query({query:s()(f()),variables:{idRepositorio:this.idAtual},fetchPolicy:"no-cache"}).then((function(e){t.caminho=e.data.caminhoRepositorio,t.$store.getters["auth/getGrupos"].filter((function(e){return e.Empresa.id==t.$store.getters["auth/getEmpresaAtual"].id})).forEach((function(o){o.GrupoRepositorios.forEach((function(o){e.data.caminhoRepositorio.indexOf(parseInt(o.Repositorio.id))>-1&&"Editor"==o.Papel&&(t.acao="edit",t.tituloModal="Editando o repositorio: "+t.repositorio_nome,t.$apollo.query({query:s()(h()),variables:{idRepositorio:t.idAtual},fetchPolicy:"no-cache"}).then((function(e){t.caminho=e.data.caminhoRepositorio})),t.nome=t.repositorio_nome,t.descricao=t.repositorio_descricao,t.modal=!0)}))})),0==t.modal&&alert("Desculpe, não possuir permição nessa Pasta!")})):(this.acao="edit",this.tituloModal="Editando o repositorio: "+this.repositorio_nome,this.$apollo.query({query:s()(m()),variables:{idRepositorio:this.idAtual},fetchPolicy:"no-cache"}).then((function(e){console.log(e.data.caminhoRepositorio),t.caminho=e.data.caminhoRepositorio})),this.nome=this.repositorio_nome,this.descricao=this.repositorio_descricao,this.modal=!0)},UpdatePastas:function(){var t=this,e=this.$store.getters["auth/getEmpresaAtual"];1==this.admin||1==this.responsavel?this.$axios.get("/repositorio/indexTree/"+e.id).then((function(e){t.$store.dispatch("pastas/setPastas",e.data)})).catch((function(t){console.log(t)})):this.$axios.get("repositorio/gruposTree/"+this.$store.getters["auth/getId"]+"/"+e.id).then((function(e){t.$store.dispatch("pastas/setPastas",e.data)})).catch((function(t){console.log(t)}))}}},R=C,k=o("2877"),E=o("eebe"),_=o.n(E),Q=o("3b73"),A=o("a370"),P=o("66e5"),S=o("4074"),D=o("0016"),I=o("4e73"),O=o("1c1c"),V=o("eb85"),N=o("24e8"),z=o("f09f"),M=o("27f9"),F=o("4b7e"),T=o("9c40"),B=o("714f"),L=o("7f67"),j=Object(k["a"])(R,r,c,!1,null,null,null),U=j.exports;_()(j,"components",{QExpansionItem:Q["a"],QCardSection:A["a"],QItem:P["a"],QItemSection:S["a"],QIcon:D["a"],QMenu:I["a"],QList:O["a"],QSeparator:V["a"],QDialog:N["a"],QCard:z["a"],QInput:M["a"],QCardActions:F["a"],QBtn:T["a"]}),_()(j,"directives",{Ripple:B["a"],ClosePopup:L["a"]});var G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn-group",{attrs:{flat:""}},[1==t.admin||1==t.responsavel||"Editor"==t.permicao?o("NewArquivos"):t._e(),t.selected.length>0?o("q-btn-group",{attrs:{flat:""}},[o("q-btn",{attrs:{icon:"mdi-magnify"},on:{click:function(e){null!=t.selected[0].idVinculo?t.modal("Visualizar"):t.visualizar(t.selected[0].id)}}},[o("q-tooltip",[t._v("Visualizar Arquivo")])],1),o("q-btn",{attrs:{icon:"mdi-download"},on:{click:function(e){null!=t.selected[0].idVinculo?t.modal("Dowload"):t.dowload(t.selected[0].id)}}},[o("q-tooltip",[t._v("Baixar Arquivo")])],1),1==t.admin||1==t.responsavel||"Editor"==t.permicao?o("Edit",{attrs:{selected:t.selected}}):t._e(),1==t.admin||1==t.responsavel||"Editor"==t.permicao?o("Link",{attrs:{selected:t.selected}}):t._e(),1==t.admin||1==t.responsavel||"Editor"==t.permicao?o("Vinculo",{attrs:{selected:t.selected},on:{updateSelect:function(e){t.selected=e}}}):t._e(),1==t.admin||1==t.responsavel||"Editor"==t.permicao?o("q-btn",{attrs:{icon:"mdi-delete"},on:{click:t.excluir}}):t._e()],1):t._e()],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.persistent,callback:function(e){t.persistent=e},expression:"persistent"}},[o("q-card",{staticClass:"bg-indigo text-white",staticStyle:{width:"400px","max-width":"40vw"}},[o("q-card-section",[t._v("Arquivos Vinculados")]),o("q-card-section",{staticClass:"bg-white text-teal q-pa-md"},t._l(t.arquivosVinculo,(function(e){return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-checkbox",{attrs:{val:e.id},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(e.nome))]),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.descricao))])],1)],1)})),1),o("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[o("q-btn",{attrs:{flat:"",label:t.operacao},on:{click:t.acao}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:t.cancelar}})],1)],1)],1)],1)},H=[],J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{attrs:{round:"",dense:"",flat:"",color:"grey-4",icon:"mdi-file-plus"},on:{click:t.inicio}},[o("q-tooltip",[t._v("Novo Arquivo")])],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("q-card",{staticClass:"my-card",staticStyle:{width:"800px","max-width":"80vw"}},[o("q-card-section",{staticClass:"bg-primary text-white"},[o("div",{staticClass:"text-h6"},[t._v("Envio de Arquivos")])]),o("q-card-section",{staticClass:"bg-white text-teal q-pa-md"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 q-pa-lg"},[o("Upload",{attrs:{getOptions:t.options},on:{files:t.setFiles,options:t.setOptions,group:t.setGroup}})],1),o("div",{staticClass:"col-12 col-md-6 q-pa-lg"},[o("q-form",[o("q-input",{attrs:{disable:"",label:"Pasta"},model:{value:t.pasta.pasta,callback:function(e){t.$set(t.pasta,"pasta",e)},expression:"pasta.pasta"}}),o("q-input",{attrs:{label:"Nome"},model:{value:t.nome,callback:function(e){t.nome=e},expression:"nome"}}),o("q-input",{attrs:{type:"textarea",label:"Descrição"},model:{value:t.descricao,callback:function(e){t.descricao=e},expression:"descricao"}})],1)],1)])]),o("q-separator"),o("q-card-actions",{staticClass:"bg-white text-primary",attrs:{align:"right"}},[o("q-btn",{attrs:{flat:"",label:"Salvar"},on:{click:t.salvar}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:t.cancelar}})],1)],1)],1)],1)},Y=[],K=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{staticClass:"q-mr-sm",attrs:{color:"blue"},on:{click:t.onPickFile}},[t._v("Ulpoad de arquivo")]),o("q-btn",{attrs:{color:"red"},on:{click:function(e){return t.removeFile()}}},[t._v("Remove arquivo")]),o("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file",id:"files",multiple:""},on:{change:function(e){return t.handleFiles()}}}),o("q-option-group",{staticClass:"q-pt-lg",attrs:{options:t.options,color:"blue"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}})],1)},W=[],X=(o("7f7f"),{props:["getOptions"],data:function(){return{files:[],options:[],group:-1}},watch:{options:function(){this.$emit("options",this.options)},getOptions:function(){this.options=this.getOptions},group:function(){this.$emit("group",this.group)},files:function(){this.$emit("files",this.files)}},methods:{onPickFile:function(){this.$refs.files.click()},handleFiles:function(){for(var t=this.$refs.files.files,e=0;e<t.length;e++)this.files.push(t[e]),this.options.push({label:t[e].name,value:this.options.length,descricao:""})},removeFile:function(){this.files.splice(this.group,1),this.options.splice(this.group,1),this.options.map((function(t,e){return t.value=e})),this.group=-1},submitFiles:function(){for(var t=this,e=function(e){if(t.files[e].id)return"continue";var o=new FormData;o.append("imagem",t.files[e]),o.append("nome","Geraldo Perfil"),o.append("descricao","Avatar"),o.append("repositorio",18),t.$axios.post("/arquivo",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){this.files[e].id=t["data"]["id"],this.files.splice(e,1,this.files[e])}.bind(t)).catch((function(t){console.log("error")}))},o=0;o<this.files.length;o++)e(o)}}}),Z=X,tt=o("9f0a"),et=Object(k["a"])(Z,K,W,!1,null,null,null),ot=et.exports;function it(){var t=u()(["\n            query($idRepositorio: ID!) {\n              arquivosRepositorio(idRepositorio: $idRepositorio) {\n                id\n                nome\n                descricao\n                extensao\n                modificado\n                size\n                created_at\n                updated_at\n                idRepositorio\n                idAutor\n                autor {\n                  id\n                  name\n                  sobrenome\n                }\n                repositorio {\n                  id\n                  nome\n                  descricao\n                }\n              }\n            }\n          "]);return it=function(){return t},t}_()(et,"components",{QBtn:T["a"],QOptionGroup:tt["a"]});var at={name:"NewArquivos",components:{Upload:ot},data:function(){return{files:[],persistent:!1,modal:!1,options:[],group:-1,nome:"",descricao:null,pasta:""}},watch:{nome:function(){-1==this.group?this.nome="":this.options[this.group].label=this.nome},descricao:function(){-1==this.group?this.descricao="":this.options[this.group].descricao=this.descricao}},methods:{inicio:function(){this.pasta=this.$router.currentRoute.params,this.pasta.id?this.modal=!0:alert("Desculpe Nenhuma pasta foi selecionada!")},setGroup:function(t){this.group=t,-1==this.group?(this.nome="",this.descricao=""):(this.nome=this.options[this.group].label,this.descricao=this.options[this.group].descricao)},setOptions:function(t){this.options=t},setFiles:function(t){this.files=t},cancelar:function(){this.nome="",this.descricao="",this.modal=!1},salvar:function(){var t=this;this.$store.dispatch("layout/setVisibleSpinner",!0);for(var e=function(e){if(t.files[e].id)return"continue";var o=new FormData;o.append("nome",t.options[e].label),o.append("descricao",t.options[e].descricao),o.append("idRepositorio",t.pasta.id),o.append("file",t.files[e]);var i={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/form-data",Accept:"application/json"}};t.$axios.post("/arquivo",o,i).then(function(t){this.files[e].id=t["data"]["id"],this.files.splice(e,1,this.files[e]),this.options.splice(e,1),this.options.map((function(t,e){return t.value=e})),this.UpdateTable(),this.$q.notify({color:"green",textColor:"white",message:"Imagem Inserido com Sucesso",position:"bottom-left",timeout:5e3*Math.random()+3e3}),this.$store.dispatch("layout/setVisibleSpinner",!1)}.bind(t)).catch((function(e){console.log(e.response.data),t.$q.notify({color:"red",textColor:"white",message:"Erro ao inserir as imagens",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.$store.dispatch("layout/setVisibleSpinner",!1)}))},o=0;o<this.files.length;o++)e(o);this.cancelar()},UpdateTable:function(){var t=this;this.$apollo.query({query:s()(it()),variables:{idRepositorio:this.pasta.id},fetchPolicy:"no-cache"}).then((function(e){t.$store.dispatch("pastas/setConteudo",e.data.arquivosRepositorio.map((function(t){return{id:t.id,nome:t.nome,descricao:t.descricao,size:t.size,updated_at:t.updated_at}})))})).catch((function(t){console.log("Error! ",t)}))}}},nt=at,st=o("05c0"),rt=o("0378"),ct=Object(k["a"])(nt,J,Y,!1,null,null,null),lt=ct.exports;_()(ct,"components",{QBtn:T["a"],QTooltip:st["a"],QDialog:N["a"],QCard:z["a"],QCardSection:A["a"],QForm:rt["a"],QInput:M["a"],QSeparator:V["a"],QCardActions:F["a"]}),_()(ct,"directives",{ClosePopup:L["a"]});var ut=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{attrs:{flat:"",icon:"mdi-pencil-outline"},on:{click:t.editar}},[o("q-tooltip",[t._v("Editar Arquivo")])],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.persistent,callback:function(e){t.persistent=e},expression:"persistent"}},[o("q-card",{staticClass:"bg-indigo text-white",staticStyle:{width:"400px","max-width":"80vw"}},[o("q-card-section",[t._v("Editar Documentos")]),o("q-card-section",{staticClass:"bg-white text-teal q-pa-md"},[o("div",{staticClass:"col-12 col-md-6 q-pa-sm"},[o("q-btn",{staticClass:"full-width",attrs:{color:"blue"},on:{click:t.onPickFile}},[t._v("Arquivo Atualizado")]),o("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file",id:"files"},on:{change:function(e){return t.handleFiles()}}}),t._v("\n          "+t._s(t.antigoNome)+"\n          "),o("q-form",[o("q-select",{attrs:{label:"Pastas","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.options,hint:"Minimo 3 caracteres para acionar o preenchimento automático"},on:{filter:t.filterFn},model:{value:t.pasta,callback:function(e){t.pasta=e},expression:"pasta"}}),o("q-input",{attrs:{label:"Nome"},model:{value:t.nome,callback:function(e){t.nome=e},expression:"nome"}}),o("q-input",{attrs:{type:"textarea",label:"Descrição"},model:{value:t.descricao,callback:function(e){t.descricao=e},expression:"descricao"}})],1)],1)]),o("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[o("q-btn",{attrs:{flat:"",label:"Salvar"},on:{click:t.salvar}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:t.cancelar}})],1)],1)],1)],1)},dt=[];function pt(){var t=u()(["\n            query($idRepositorio: ID!) {\n              arquivosRepositorio(idRepositorio: $idRepositorio) {\n                id\n                nome\n                descricao\n                extensao\n                modificado\n                size\n                created_at\n                updated_at\n                idRepositorio\n                idAutor\n                autor {\n                  id\n                  name\n                  sobrenome\n                }\n                repositorio {\n                  id\n                  nome\n                  descricao\n                }\n              }\n            }\n          "]);return pt=function(){return t},t}function mt(){var t=u()(["\n            query($id: ID!) {\n              Repositorio(id: $id) {\n                id\n                nome\n              }\n            }\n          "]);return mt=function(){return t},t}function ht(){var t=u()(["\n              query($nome: String!, $idEmpresa: ID!) {\n                whereRepositorio(nome: $nome, idEmpresa: $idEmpresa) {\n                  id\n                  nome\n                }\n              }\n            "]);return ht=function(){return t},t}var ft={name:"Edit",components:{Upload:ot},props:["selected"],data:function(){return{persistent:!1,options:[],stringOptions:[],antigoNome:"",nome:"",descricao:null,pasta:null,file:null}},methods:{onPickFile:function(){this.$refs.files.click()},handleFiles:function(){var t=this.$refs.files.files;this.file=t[0],this.antigoNome=this.file["name"],console.log(this.file["name"])},filterFn:function(t,e,o){var i=this;t.length<3?o():e((function(){i.$apollo.query({query:s()(ht()),variables:{nome:t,idEmpresa:i.$store.getters["auth/getEmpresaAtual"].id}}).then((function(t){i.options=t.data.whereRepositorio.map((function(t){return t.nome})),i.stringOptions=t.data.whereRepositorio}))}))},editar:function(){var t=this;this.nome=this.selected[0].nome,this.descricao=this.selected[0].descricao,this.$apollo.query({query:s()(mt()),variables:{id:this.$router.currentRoute.params.id}}).then((function(e){t.pasta=e.data.Repositorio.nome,t.stringOptions.push(e.data.Repositorio)})),this.persistent=!0},cancelar:function(){this.nome="",this.descricao="",this.pasta="",this.file=null,this.stringOptions=[],this.options=[],this.persistent=!1},salvar:function(){var t=this,e=new FormData;e.append("nome",this.nome),e.append("descricao",this.descricao),e.append("idAutor",this.$store.getters["auth/getId"]),e.append("idRepositorio",this.stringOptions.filter((function(e){return e.nome==t.pasta}))[0].id),e.append("file",this.file);var o={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/form-data",Accept:"application/json"}};this.$axios.post("arquivo/"+this.selected[0].id,e,o).then((function(e){t.persistent=!1,t.$q.notify({color:"green",textColor:"white",message:"Atualizado com Sucesso",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.persistent=!1,t.UpdateTable()})).catch((function(e){console.log(e.response.data),t.$q.notify({color:"red",textColor:"white",message:"Erro ao atualizar Registo",position:"bottom-left",timeout:5e3*Math.random()+3e3})}))},UpdateTable:function(){var t=this;this.$apollo.query({query:s()(pt()),variables:{idRepositorio:this.$route.params.id},fetchPolicy:"no-cache"}).then((function(e){t.$store.dispatch("pastas/setConteudo",e.data.arquivosRepositorio.map((function(t){return{id:t.id,nome:t.nome,descricao:t.descricao,size:t.size,updated_at:t.updated_at}})))})).catch((function(t){console.log("Error! ",t)}))}}},vt=ft,qt=o("ddd8"),gt=Object(k["a"])(vt,ut,dt,!1,null,null,null),bt=gt.exports;_()(gt,"components",{QBtn:T["a"],QTooltip:st["a"],QDialog:N["a"],QCard:z["a"],QCardSection:A["a"],QForm:rt["a"],QSelect:qt["a"],QInput:M["a"],QCardActions:F["a"]}),_()(gt,"directives",{ClosePopup:L["a"]});var $t=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{attrs:{flat:"",icon:"mdi-share-variant"},on:{click:t.link}},[o("q-tooltip",[t._v("Link Publico")])],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.persistent,callback:function(e){t.persistent=e},expression:"persistent"}},[o("q-card",{staticClass:"bg-indigo text-white",staticStyle:{width:"400px","max-width":"80vw"}},[o("q-card-section",[t._v("Link Publico")]),o("q-card-section",{staticClass:"bg-white text-teal q-pa-md"},[o("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),o("q-input",{attrs:{filled:"",label:"Link Publico"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),o("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[o("q-btn",{attrs:{flat:"",label:"Salvar"},on:{click:t.salvar}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:t.cancelar}})],1)],1)],1)],1)},xt=[],yt=(o("b54a"),{name:"Link",props:["selected"],data:function(){return{modal:!1,date:"",url:"",id:""}},methods:{link:function(){var t=this;this.id=this.selected[0].id,this.$axios.get("/arquivo/visibilidade/"+this.id,{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/json"}).then((function(e){t.date=e.data.data,t.url=e.data.link,t.persistent=!0})).catch((function(t){console.log(t.response.data)}))},salvar:function(){var t=this;this.$axios.post("/arquivo/visibilidade/"+this.id,{data:this.date},{headers:{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/json"}}).then((function(e){t.url=e.data})).catch((function(t){console.log(t.response.data)}))},cancelar:function(){this.date="",this.url="",this.persistent=!1}}}),wt=yt,Ct=o("7cbe"),Rt=o("52ee"),kt=Object(k["a"])(wt,$t,xt,!1,null,null,null),Et=kt.exports;_()(kt,"components",{QBtn:T["a"],QTooltip:st["a"],QDialog:N["a"],QCard:z["a"],QCardSection:A["a"],QInput:M["a"],QIcon:D["a"],QPopupProxy:Ct["a"],QDate:Rt["a"],QCardActions:F["a"]}),_()(kt,"directives",{ClosePopup:L["a"]});var _t=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{attrs:{flat:"",icon:null==t.selected[0].idVinculo?"mdi-link-plus":"mdi-link"},on:{click:t.vinculo}},[o("q-tooltip",[t._v("Vinculo de Arquivo")])],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.persistent,callback:function(e){t.persistent=e},expression:"persistent"}},[o("q-card",{staticClass:"bg-indigo text-white",staticStyle:{width:"800px","max-width":"80vw"}},[o("q-card-section",[t._v("Vinculo de Arquivo")]),o("q-card-section",{staticClass:"bg-white text-teal q-pa-md"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 q-pa-lg"},t._l(t.arquivosPasta,(function(e){return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{tag:"label"}},[o("q-item-section",{attrs:{side:"",top:""}},[o("q-checkbox",{attrs:{val:e.id},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(e.nome))]),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.descricao))])],1)],1)})),1),o("div",{staticClass:"col-12 col-md-6 q-pa-lg"},[o("q-form",[o("q-input",{attrs:{disable:"",label:"Pasta"},model:{value:t.pasta.pasta,callback:function(e){t.$set(t.pasta,"pasta",e)},expression:"pasta.pasta"}}),o("q-input",{attrs:{label:"Nome"},model:{value:t.nome,callback:function(e){t.nome=e},expression:"nome"}}),o("q-input",{attrs:{type:"textarea",label:"Descrição"},model:{value:t.descricao,callback:function(e){t.descricao=e},expression:"descricao"}})],1)],1)])]),o("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[o("q-btn",{attrs:{flat:"",label:"Salvar"},on:{click:t.salvar}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar"},on:{click:t.cancelar}})],1)],1)],1)],1)},Qt=[];o("551c"),o("06db"),o("097d");function At(){var t=u()(["\n            query($idRepositorio: ID!) {\n              arquivosRepositorio(idRepositorio: $idRepositorio) {\n                id\n                nome\n                descricao\n                extensao\n                modificado\n                size\n                idAutor\n                created_at\n                updated_at\n                autor {\n                  id\n                  name\n                  sobrenome\n                }\n                idRepositorio\n                repositorio {\n                  id\n                  nome\n                  descricao\n                }\n                idVinculo\n                vinculo {\n                  id nome descricao\n                }\n              }\n              caminhoRepositorio(id: $idRepositorio)\n            }\n          "]);return At=function(){return t},t}function Pt(){var t=u()(["\n            mutation(\n              $id: ID!\n              $nome: String\n              $descricao: String\n              $idArquivos: [Int]\n            ) {\n              updateVinculoArquivo(\n                id: $id\n                nome: $nome\n                descricao: $descricao\n                idArquivos: $idArquivos\n              ) {\n                id\n                nome\n                descricao\n                idRepositorio\n              }\n            }\n          "]);return Pt=function(){return t},t}function St(){var t=u()(["\n            mutation($id: ID!) {\n              deleteVinculoArquivo(id: $id) {\n                id\n                nome\n                descricao\n                idRepositorio\n              }\n            }\n          "]);return St=function(){return t},t}function Dt(){var t=u()(["\n            mutation(\n              $nome: String!\n              $descricao: String\n              $idRepositorio: Int!\n              $idArquivos: [Int]!\n            ) {\n              createVinculoArquivo(\n                nome: $nome\n                descricao: $descricao\n                idRepositorio: $idRepositorio\n                idArquivos: $idArquivos\n              ) {\n                id\n                nome\n                descricao\n                idRepositorio\n              }\n            }\n          "]);return Dt=function(){return t},t}var It={props:["selected"],data:function(){return{persistent:!1,select:[],pasta:"",nome:"",descricao:""}},computed:{arquivosPasta:function(){var t=this;return this.$store.getters["pastas/getConteudo"].filter((function(e){return null==e.idVinculo||e.idVinculo==t.selected[0].idVinculo}))}},methods:{salvar:function(){null==this.selected[0].idVinculo?this.create():this.select.length>1?this.update():1==this.select.length?this.$q.notify({color:"red",textColor:"white",message:"Desculpe criar um vinculo com apenas 1 arquivo",position:"bottom-left",timeout:5e3*Math.random()+3e3}):this.delete()},cancelar:function(){this.select=[],this.persistent=!1},vinculo:function(){var t=this;null!=this.selected[0].idVinculo&&(this.select=this.arquivosPasta.filter((function(e){return e.idVinculo==t.selected[0].idVinculo})).map((function(t){return t.id})),this.nome=this.selected[0].vinculo.nome,this.descricao=this.selected[0].vinculo.descricao),this.pasta=this.$router.currentRoute.params,this.persistent=!0},spinner:function(t){this.$store.dispatch("layout/setVisibleSpinner",t)},create:function(){var t=this;this.$apollo.mutate({mutation:s()(Dt()),variables:{nome:this.nome,descricao:this.descricao,idRepositorio:this.pasta.id,idArquivos:this.select},fetchPolicy:"no-cache"}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Vinculo feito com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.cancelar()})).catch((function(e){console.log("Error! ",e),t.$q.notify({color:"red",textColor:"white",message:"Desculpe não foi possivel fazer o vinculo, tente novamente mais tarde!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return t.query()}))},delete:function(){var t=this;this.$apollo.mutate({mutation:s()(St()),variables:{id:this.selected[0].idVinculo},fetchPolicy:"no-cache"}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Vinculo desfeito com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.cancelar()})).catch((function(e){console.log("Error! ",e),t.$q.notify({color:"red",textColor:"white",message:"Desculpe não foi possivel desfazer o vinculo, tente novamente mais tarde!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return t.query()}))},update:function(){var t=this;this.$apollo.mutate({mutation:s()(Pt()),variables:{id:this.selected[0].idVinculo,nome:this.nome,descricao:this.descricao,idArquivos:this.select},fetchPolicy:"no-cache"}).then((function(e){t.$q.notify({color:"green",textColor:"white",message:"Vinculo atualizado com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),t.cancelar()})).catch((function(e){console.log("Error! ",e),t.$q.notify({color:"red",textColor:"white",message:"Desculpe não foi possivel atualizar o vinculo, tente novamente mais tarde!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return t.query()}))},query:function(){var t=this;this.spinner(!0),this.$apollo.query({query:s()(At()),variables:{idRepositorio:this.pasta.id},fetchPolicy:"no-cache"}).then((function(e){t.$store.dispatch("pastas/setCaminho",e.data.caminhoRepositorio),t.$store.dispatch("pastas/setConteudo",e.data.arquivosRepositorio.map((function(t){var e=t.updated_at;return t.updated_at="".concat(e[8]).concat(e[9],"/").concat(e[6]).concat(e[5],"/").concat(e[0]).concat(e[1]).concat(e[2]).concat(e[3]),{id:t.id,nome:t.nome,descricao:t.descricao,size:t.size,updated_at:t.updated_at,idVinculo:t.idVinculo,vinculo:t.vinculo}})))})).catch((function(t){console.log("Error! ",t)})).finally((function(){return t.spinner(!1)}))}}},Ot=It,Vt=o("8f8e"),Nt=o("0170"),zt=Object(k["a"])(Ot,_t,Qt,!1,null,null,null),Mt=zt.exports;function Ft(){var t=u()(["\n            query($idRepositorio: ID!) {\n              arquivosRepositorio(idRepositorio: $idRepositorio) {\n                id\n                nome\n                descricao\n                extensao\n                modificado\n                size\n                created_at\n                updated_at\n                idRepositorio\n                idAutor\n                autor {\n                  id\n                  name\n                  sobrenome\n                }\n                repositorio {\n                  id\n                  nome\n                  descricao\n                }\n              }\n            }\n          "]);return Ft=function(){return t},t}function Tt(){var t=u()(["\n              query($id: ID!) {\n                VinculoArquivo(id: $id) {\n                  id\n                  nome\n                  descricao\n                  arquivos {\n                    id\n                    nome\n                    descricao\n                  }\n                }\n              }\n            "]);return Tt=function(){return t},t}_()(zt,"components",{QBtn:T["a"],QTooltip:st["a"],QDialog:N["a"],QCard:z["a"],QCardSection:A["a"],QItem:P["a"],QItemSection:S["a"],QCheckbox:Vt["a"],QItemLabel:Nt["a"],QForm:rt["a"],QInput:M["a"],QCardActions:F["a"]}),_()(zt,"directives",{Ripple:B["a"],ClosePopup:L["a"]});var Bt={name:"Opcoes",components:{NewArquivos:lt,Edit:bt,Link:Et,Vinculo:Mt},props:["selected"],data:function(){return{persistent:!1,arquivosVinculo:[],select:[],operacao:""}},watch:{persistent:function(){var t=this;1==this.persistent&&this.$apollo.query({query:s()(Tt()),variables:{id:this.selected[0].idVinculo},fetchPolicy:"no-cache"}).then((function(e){console.log(e),t.arquivosVinculo=e.data.VinculoArquivo.arquivos,t.select.push(t.selected[0].id)})).catch((function(t){console.log("Error! ",t)}))}},computed:{admin:function(){return this.$store.getters["auth/isAdmin"]},responsavel:function(){return this.$store.getters["auth/isResponsavel"]},permicao:function(){return this.$store.getters["pastas/getPastaSelecionada"].papel}},methods:{acao:function(){var t=this;"Visualizar"==this.operacao?(this.select.forEach((function(e){t.visualizar(e)})),this.cancelar()):"Dowload"==this.operacao&&(this.select.forEach((function(e){t.dowload(e)})),this.cancelar())},modal:function(t){this.persistent=!0,this.operacao=t},cancelar:function(){this.persistent=!1,this.operacao="",this.select=[],this.arquivosVinculo=[]},excluir:function(){var t=this;if(null!=this.selected[0].idVinculo)this.$q.notify({color:"red",textColor:"white",message:"Desculpe, não é possivel excluir arquivo vinculado!",position:"bottom-left",timeout:5e3*Math.random()+3e3});else{var e={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/form-data",Accept:"application/json"}};this.$axios.delete("/arquivo/"+this.selected[0].id,e).then((function(e){t.UpdateTable(),t.$q.notify({color:"green",textColor:"white",message:"Arquivo Excluido com sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(e){console.log("Error ao excluir arquivo!",e),t.$q.notify({color:"red",textColor:"white",message:"Error ao excluir arquivo!",position:"bottom-left",timeout:5e3*Math.random()+3e3})}))}},visualizar:function(t){this.$axios.get("arquivo/file/"+t,{responseType:"blob",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data],{type:t.data.type})),o=window.open(e,"_blank");o.focus()}))},dowload:function(t){var e=this;this.$axios.get("arquivo/dowload/"+t,{responseType:"blob",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var o=window.URL.createObjectURL(new Blob([t.data],{type:t.data.type})),i=document.createElement("a");i.href=o,i.download=e.selected[0].nome,document.body.appendChild(i),i.click()}))},UpdateTable:function(){var t=this;this.$apollo.query({query:s()(Ft()),variables:{idRepositorio:this.$route.params.id},fetchPolicy:"no-cache"}).then((function(e){t.$store.dispatch("pastas/setConteudo",e.data.arquivosRepositorio.map((function(t){return{id:t.id,nome:t.nome,descricao:t.descricao,size:t.size,updated_at:t.updated_at}})))})).catch((function(t){console.log("Error! ",t)}))}}},Lt=Bt,jt=o("e7a9"),Ut=Object(k["a"])(Lt,G,H,!1,null,null,null),Gt=Ut.exports;_()(Ut,"components",{QBtnGroup:jt["a"],QBtn:T["a"],QTooltip:st["a"],QDialog:N["a"],QCard:z["a"],QCardSection:A["a"],QItem:P["a"],QItemSection:S["a"],QCheckbox:Vt["a"],QItemLabel:Nt["a"],QCardActions:F["a"]}),_()(Ut,"directives",{Ripple:B["a"],ClosePopup:L["a"]});var Ht=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"YL__toolbar-input-container row no-wrap"},[o("q-input",{staticClass:"bg-white col",attrs:{dense:"",outlined:"",square:"",placeholder:"Pesquisar Documentos"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.busca(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-btn-dropdown",{attrs:{dense:"",flat:""}},[o("div",{staticClass:"row"},[o("div",{staticClass:"q-pa-md"},[o("q-option-group",{attrs:{options:t.radio,label:"Notifications",type:"radio",s:""},model:{value:t.selectPasta,callback:function(e){t.selectPasta=e},expression:"selectPasta"}})],1),o("div",{staticClass:"q-pa-md"},[o("q-option-group",{attrs:{options:t.checkbox,label:"Notifications",type:"checkbox"},model:{value:t.selectChechbox,callback:function(e){t.selectChechbox=e},expression:"selectChechbox"}})],1)]),t.selectChechbox.indexOf("data")>=0?o("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[o("q-input",{attrs:{filled:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}],null,!1,4214985005),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e()])]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),o("q-btn",{staticClass:"YL__toolbar-input-btn",attrs:{color:"grey-3","text-color":"grey-8",icon:"search",unelevatedI:""},on:{click:t.busca}})],1)},Jt=[],Yt=(o("386d"),{data:function(){return{search:"",radio:[{label:"Todos",value:!1},{label:"Na Pasta",value:!0,color:"green"}],checkbox:[{label:"Titulo",value:"nome"},{label:"Descrição",value:"descricao",color:"green"},{label:"Data",value:"data",color:"red"},{label:"Conteudo",value:"conteudo",color:"brown"}],selectPasta:!1,selectChechbox:["conteudo"],ativaApi:1,date:"2020/01/01"}},watch:{selectChechbox:function(){this.$store.dispatch("search/selectChechbox",this.selectChechbox)},date:function(){this.$store.dispatch("search/setDate",this.date)},selectPasta:function(){this.$router.currentRoute.params.id>0?this.selectPasta?this.$store.dispatch("search/selectPasta",this.$router.currentRoute.params):this.$store.dispatch("search/selectPasta",""):0!=this.selectPasta?(this.$store.dispatch("search/selectPasta",""),this.selectPasta=!1,this.$q.notify({color:"red",textColor:"white",message:"Desculpe, não é possivle pesquisa por pasta pois você não se encronta numa pasta!",position:"bottom-left",timeout:5e3*Math.random()+3e3})):(this.$store.dispatch("search/selectPasta",""),this.$store.dispatch("pastas/setCaminho",[]))}},methods:{busca:function(){this.selectPasta&&this.$router.currentRoute.params.id>0&&this.$store.dispatch("search/selectPasta",this.$router.currentRoute.params),this.$router.currentRoute.params.search?(this.$router.push({name:"Search",params:{search:this.search}}),this.$store.dispatch("search/setAtivaApi",this.ativaApi++)):this.$router.push({name:"Search",params:{search:this.search}})}}}),Kt=Yt,Wt=o("f20b"),Xt=Object(k["a"])(Kt,Ht,Jt,!1,null,null,null),Zt=Xt.exports;_()(Xt,"components",{QInput:M["a"],QBtnDropdown:Wt["a"],QOptionGroup:tt["a"],QIcon:D["a"],QPopupProxy:Ct["a"],QDate:Rt["a"],QBtn:T["a"]});var te=o("6247"),ee=o("aca5"),oe={name:"Documentos",components:{Expansion:U,Opcoes:Gt,Search:Zt,Nome:te["a"],Spinner:ee["a"]},data:function(){return{leftDrawerOpen:!1,selected:[],atualizarTabela:!1,repositorioAtual:""}},computed:{caminho:function(){return this.$store.getters["pastas/getCaminho"]},admin:function(){return this.$store.getters["auth/isAdmin"]},responsavel:function(){return this.$store.getters["auth/isResponsavel"]},pastas:function(){return this.$store.getters["pastas/getPastas"]}}},ie=oe,ae=(o("cf30"),o("4d5a")),ne=o("e359"),se=o("65c6"),re=o("6ac5"),ce=o("2c91"),le=o("9404"),ue=o("4983"),de=o("09e3"),pe=Object(k["a"])(ie,i,a,!1,null,null,null);e["default"]=pe.exports;_()(pe,"components",{QLayout:ae["a"],QHeader:ne["a"],QToolbar:se["a"],QBtn:T["a"],QIcon:D["a"],QToolbarTitle:re["a"],QSpace:ce["a"],QDrawer:le["a"],QScrollArea:ue["a"],QList:O["a"],QExpansionItem:Q["a"],QItem:P["a"],QItemSection:S["a"],QItemLabel:Nt["a"],QSeparator:V["a"],QPageContainer:de["a"]}),_()(pe,"directives",{ClosePopup:L["a"]})},6247:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn-dropdown",{attrs:{flat:"",label:t.name}},[o("q-list",[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.modalEmpresa=!0}}},[o("q-item-section",[o("q-item-label",[t._v("Empresas")])],1)],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.sair()}}},[o("q-item-section",[o("q-item-label",[t._v("Sair")])],1)],1)],1)],1),o("q-dialog",{attrs:{persistent:"","transition-show":"rotate","transition-hide":"rotate"},model:{value:t.modalEmpresa,callback:function(e){t.modalEmpresa=e},expression:"modalEmpresa"}},[o("q-card",{staticClass:"my-card"},[o("q-card-section",{staticClass:"bg-primary text-white"},[o("div",{staticClass:"text-h6"},[t._v("Bem vindo ao HDOC")]),o("div",{staticClass:"text-subtitle2"},[t._v("Por favor selecione a empresa que deseja visualiza os arquivos!")])]),o("q-select",{attrs:{label:"Scale","transition-show":"scale","transition-hide":"scale",filled:"",options:t.options},model:{value:t.getEmpresa,callback:function(e){t.getEmpresa=e},expression:"getEmpresa"}}),o("q-separator"),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Confirma",color:"primary"},on:{click:t.SelectEmpresa}})],1)],1)],1)],1)},a=[],n=(o("28a5"),o("d624")),s=o.n(n),r=o("9530"),c=o.n(r);function l(){var t=s()(["\n            mutation {\n              logout {\n                status\n                message\n              }\n            }\n          "]);return l=function(){return t},t}var u={data:function(){return{modalEmpresa:!1,getEmpresa:null}},methods:{SelectEmpresa:function(){var t=this,e=this.$store.getters["auth/getEmpresas"].filter((function(e){return e.nomeFantasia==t.getEmpresa}))[0];this.$store.dispatch("auth/setEmpresaAtual",e),1==this.admin||1==this.responsavel?this.$axios.get("/repositorio/indexTree/"+e.id).then((function(e){t.$store.dispatch("pastas/setPastas",e.data)})).catch((function(t){console.log(t)})):this.$axios.get("repositorio/gruposTree/"+this.$store.getters["auth/getId"]+"/"+e.id).then((function(e){t.$store.dispatch("pastas/setPastas",e.data)})).catch((function(t){console.log(t)}))},sair:function(){this.$apollo.mutate({mutation:c()(l())}).then((function(t){localStorage.removeItem("token"),location.reload()})).catch((function(t){localStorage.removeItem("token"),location.reload()}))}},computed:{options:function(){return this.$store.getters["auth/getEmpresas"].filter((function(t){return"Inativo"!=t.status})).filter((function(t){return"Suspenso"!=t.status||new Date(t.dataSuspensao.split("-"))<new Date})).map((function(t){return t.nomeFantasia}))},name:function(){return this.$store.getters["auth/getName"]},responsavel:function(){return this.$store.getters["auth/isResponsavel"]},admin:function(){return this.$store.getters["auth/isAdmin"]}},mounted:function(){1==this.$store.getters["auth/getEmpresas"].length?(this.getEmpresa=this.$store.getters["auth/getEmpresas"][0].nomeFantasia,this.SelectEmpresa()):this.$store.getters["auth/getEmpresaAtual"]?(this.getEmpresa=this.$store.getters["auth/getEmpresaAtual"].nomeFantasia,this.SelectEmpresa()):this.modalEmpresa=!0}},d=u,p=o("2877"),m=o("eebe"),h=o.n(m),f=o("f20b"),v=o("1c1c"),q=o("66e5"),g=o("4074"),b=o("0170"),$=o("24e8"),x=o("f09f"),y=o("a370"),w=o("ddd8"),C=o("eb85"),R=o("4b7e"),k=o("9c40"),E=o("7f67"),_=Object(p["a"])(d,i,a,!1,null,null,null);e["a"]=_.exports;h()(_,"components",{QBtnDropdown:f["a"],QList:v["a"],QItem:q["a"],QItemSection:g["a"],QItemLabel:b["a"],QDialog:$["a"],QCard:x["a"],QCardSection:y["a"],QSelect:w["a"],QSeparator:C["a"],QCardActions:R["a"],QBtn:k["a"]}),h()(_,"directives",{ClosePopup:E["a"]})},aca5:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[o("q-spinner-gears",{attrs:{size:"100px",dark:!0,color:"primary"}})],1)},a=[],n={name:"Spinner",data:function(){return{}},computed:{visible:function(){return this.$store.getters["layout/getVisibleSpinner"]}}},s=n,r=(o("e00e"),o("2877")),c=o("eebe"),l=o.n(c),u=o("24e8"),d=o("74f7"),p=o("cf57"),m=Object(r["a"])(s,i,a,!1,null,"55b020f8",null);e["a"]=m.exports;l()(m,"components",{QDialog:u["a"],QInnerLoading:d["a"],QSpinnerGears:p["a"]})},cf30:function(t,e,o){"use strict";var i=o("2573"),a=o.n(i);a.a},e00e:function(t,e,o){"use strict";var i=o("f116"),a=o.n(i);a.a},f116:function(t,e,o){}}]);