(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{d5bb:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("q-list",{attrs:{link:""}},[n("q-item-label",{attrs:{header:""}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-8 col-md-3"},[n("q-input",{attrs:{color:"indigo",label:"Filtar resultados"},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),n("div",{staticClass:"col-0 col-md-5"}),1==e.isAdmin?n("div",{staticClass:"col-4 col-md-1"},[n("br"),n("q-toggle",{attrs:{color:"blue",label:"Todos Usuarios",val:"blue"},model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}})],1):e._e()])]),e._l(e.options,(function(t){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,attrs:{tag:"label"}},[n("q-item-section",{attrs:{avatar:""}},[n("q-checkbox",{attrs:{val:t},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),n("q-item-section",[n("q-item-label",[e._v(e._s(t.name)+" "+e._s(t.sobrenome))]),n("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.status))])],1)],1)}))],2),n("div",{staticClass:"q-pa-lg flex flex-center"},[n("q-pagination",{attrs:{color:"blue",max:e.maxCurrent,"boundary-links":!0},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)],1)},i=[],r=n("d624"),a=n.n(r),o=(n("7f7f"),n("9530")),l=n.n(o);function c(){var e=a()(["\n            query($idEmpresa: ID!) {\n              userEmpresa(idEmpresa: $idEmpresa) {\n                id\n                name\n                sobrenome\n                status\n              }\n            }\n          "]);return c=function(){return e},e}function u(){var e=a()(["\n            query {\n              users {\n                id\n                name\n                sobrenome\n                status\n              }\n            }\n          "]);return u=function(){return e},e}var d={props:["UpdateUser"],data:function(){return{selected:[],options:[],usuariosAll:[],current:1,text:"",selection:!1}},watch:{selection:function(){this.selection&&this.updateAll()},UpdateUser:function(){this.UpdateUser&&this.update()},text:function(){var e=this;this.options=this.usuariosAll.filter((function(t){var n="".concat(t.name," ").concat(t.sobrenome);return n.toLowerCase().indexOf(e.text.toLowerCase())>-1})).filter((function(t,n){if(n>=10*(e.current-1)&&n<10*e.current)return t}))},current:function(){var e=this;this.options=this.usuariosAll.filter((function(t,n){if(n>=10*(e.current-1)&&n<10*e.current)return t}))},selected:function(){this.selected.length>1&&this.selected.splice(0,1),this.$emit("selected",this.selected)}},computed:{isAdmin:function(){return this.$store.getters["auth/isAdmin"]},maxCurrent:function(){return this.usuariosAll.length/10<=1?1:Math.ceil(this.usuariosAll.length/10)}},methods:{spinner:function(e){this.$store.dispatch("layout/setVisibleSpinner",e)},updateAll:function(){var e=this;this.spinner(!0),this.$apollo.query({query:l()(u()),fetchPolicy:"no-cache"}).then((function(t){e.usuariosAll=t.data.users,e.options=e.usuariosAll.filter((function(t,n){if(n>=10*(e.current-1)&&n<10*e.current)return t})),e.spinner(!1)}))},update:function(){var e=this;this.spinner(!0),this.$apollo.query({query:l()(c()),variables:{idEmpresa:this.$store.getters["auth/getEmpresaAtual"].id},fetchPolicy:"no-cache"}).then((function(t){e.usuariosAll=t.data.userEmpresa,e.options=e.usuariosAll.filter((function(t,n){if(n>=10*(e.current-1)&&n<10*e.current)return t})),e.spinner(!1)}))}},mounted:function(){this.update()},beforeDestroy:function(){this.$emit("selected",[])}},p=d,f=n("2877"),h=n("eebe"),m=n.n(h),b=n("9989"),v=n("1c1c"),q=n("0170"),x=n("27f9"),g=n("0016"),A=n("9564"),y=n("66e5"),k=n("4074"),w=n("8f8e"),C=n("3b16"),Q=n("714f"),$=Object(f["a"])(p,s,i,!1,null,null,null);t["default"]=$.exports;m()($,"components",{QPage:b["a"],QList:v["a"],QItemLabel:q["a"],QInput:x["a"],QIcon:g["a"],QToggle:A["a"],QItem:y["a"],QItemSection:k["a"],QCheckbox:w["a"],QPagination:C["a"]}),m()($,"directives",{Ripple:Q["a"]})}}]);