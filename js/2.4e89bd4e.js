(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{8861:function(e,n,o){"use strict";o.r(n);var t=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"q-ma-md q-pa-md"},[o("q-tabs",{staticClass:"bg-indigo text-white",attrs:{"inline-label":""},model:{value:e.opcoes,callback:function(n){e.opcoes=n},expression:"opcoes"}},[o("q-tab",{attrs:{name:"Dados",icon:"mdi-dice-multiple",label:"Dados"}}),o("q-tab",{attrs:{name:"Endereco",icon:"mdi-home-map-marker",label:"Endereço"}}),o("q-tab",{attrs:{name:"Contatos",icon:"mdi-contacts",label:"Contatos"}})],1),o("div",{staticClass:"q-ma-md q-pa-md"},[o("q-form",{directives:[{name:"show",rawName:"v-show",value:"Dados"==e.opcoes,expression:"opcoes == 'Dados' "}]},[o("q-input",{attrs:{color:"indigo",label:"CNPJ",mask:"##.###.###/####-##","unmasked-value":"",rules:[function(e){return 14==e.length||"CNPJ invalido"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-barcode"}})]},proxy:!0}]),model:{value:e.cnpj,callback:function(n){e.cnpj=n},expression:"cnpj"}}),o("q-input",{attrs:{color:"indigo",label:"Razão Social",rules:[function(e){return e.length>=5&&e.length<=50||"Razão Social deve possuir de 5 até 50 carácter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-account-card-details"}})]},proxy:!0}]),model:{value:e.razaoSocial,callback:function(n){e.razaoSocial=n},expression:"razaoSocial"}}),o("q-input",{attrs:{color:"indigo",label:"Nome Fantasia",rules:[function(e){return e.length>=5&&e.length<=50||"Nome Fantasia deve possuir de 5 até 50 carácter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-account-convert"}})]},proxy:!0}]),model:{value:e.nomeFantasia,callback:function(n){e.nomeFantasia=n},expression:"nomeFantasia"}}),o("q-select",{attrs:{options:e.grupos,label:"Status",rules:[function(e){return e.length>=1||"Não é um grupo valido!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-stairs"}})]},proxy:!0}]),model:{value:e.status,callback:function(n){e.status=n},expression:"status"}}),"Suspenso"==e.status?o("q-input",{attrs:{color:"indigo",label:"Data de Liberação",mask:"##/##/####",rules:[function(e){return 10==e.length||"Data Invalida"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-calendar-range"}})]},proxy:!0}],null,!1,2331292001),model:{value:e.date,callback:function(n){e.date=n},expression:"date"}}):e._e(),o("q-select",{attrs:{label:"Responsavel","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.options,hint:"Quando usuario é responsavel pela empresa automático deixa de pertencer algum grupo"},on:{filter:e.filterFn},model:{value:e.responsavel,callback:function(n){e.responsavel=n},expression:"responsavel"}})],1),o("q-form",{directives:[{name:"show",rawName:"v-show",value:"Endereco"==e.opcoes,expression:"opcoes == 'Endereco' "}]},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"CEP",rules:[function(e){return 8==e.length||"CEP Invalido!"}],mask:"##.###-###","unmasked-value":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-map-marker-outline"}})]},proxy:!0}]),model:{value:e.endereco.cep,callback:function(n){e.$set(e.endereco,"cep",n)},expression:"endereco.cep"}})],1),o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Cidade",rules:[function(e){return e.length>=3&&e.length<=50||"Cidade deve conter 3 até 50 caracter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-home"}})]},proxy:!0}]),model:{value:e.endereco.cidade,callback:function(n){e.$set(e.endereco,"cidade",n)},expression:"endereco.cidade"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Estado",rules:[function(e){return e.length>=2&&e.length<=50||"Estado deve conter 2 até 50 caracter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-map"}})]},proxy:!0}]),model:{value:e.endereco.estado,callback:function(n){e.$set(e.endereco,"estado",n)},expression:"endereco.estado"}})],1),o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Bairro",rules:[function(e){return e.length<=50||"Bairro deve ter menos de 50 caracter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-map-marker"}})]},proxy:!0}]),model:{value:e.endereco.bairro,callback:function(n){e.$set(e.endereco,"bairro",n)},expression:"endereco.bairro"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Rua",rules:[function(e){return e.length>=5&&e.length<=50||"Rua deve conter 5 até 50 caracter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-navigation"}})]},proxy:!0}]),model:{value:e.endereco.rua,callback:function(n){e.$set(e.endereco,"rua",n)},expression:"endereco.rua"}})],1),o("div",{staticClass:"col-12 col-md-6 q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Numero",mask:"########","unmasked-value":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-numeric"}})]},proxy:!0}]),model:{value:e.endereco.numero,callback:function(n){e.$set(e.endereco,"numero",n)},expression:"endereco.numero"}})],1)]),o("div",{staticClass:"q-pa-md"},[o("q-input",{attrs:{color:"indigo",label:"Complemento",rules:[function(e){return e.length<=200||"Complemento deve ser menor que 200 caracter!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"mdi-message-text-outline"}})]},proxy:!0}]),model:{value:e.endereco.complemento,callback:function(n){e.$set(e.endereco,"complemento",n)},expression:"endereco.complemento"}})],1)]),"Contatos"==e.opcoes?o("q-form",[e._l(e.telefones,(function(n,t){return o("div",{key:t,staticClass:"row"},[o("div",{staticClass:"col-10"},[o("q-input",{attrs:{color:"indigo",label:"Telefone",rules:[function(e){return(10==e.length||11==e.length)&&e.match(/^[0-9]+$/)||"Formato Telefone Invalido!"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{staticClass:"gt-sm",attrs:{name:"mdi-cellphone-android"}})]},proxy:!0}],null,!0),model:{value:n.numero,callback:function(o){e.$set(n,"numero",o)},expression:"tel.numero"}})],1),o("div",{staticClass:"col-2 q-pa-lg"},[o("q-btn",{attrs:{round:"",color:"red",icon:"mdi-delete"},on:{click:function(n){return e.removeTel(t)}}})],1)])})),o("div",{staticClass:"row"},[o("div",{staticClass:"col-9 col-sm-10"}),o("div",{staticClass:"col-2 q-pl-lg"},[o("q-btn",{attrs:{round:"",color:"indigo",icon:"mdi-phone-plus"},on:{click:function(n){return e.addTel()}}})],1)])],2):e._e(),o("div",{staticClass:"row q-pa-sm q-ma-sm"},[o("div",{staticClass:"col-1 col-sm-6 col-md-9"}),o("div",{staticClass:"col-5 col-sm-3 col-md-1 q-mr-md"},[o("q-btn",{attrs:{color:"green",label:"Salvar'"},on:{click:function(n){return e.salvar()}}})],1),o("div",{staticClass:"col-4 col-sm-2 col-md-1 q-ml-md"},[o("q-btn",{attrs:{color:"red",label:"Excluir"},on:{click:function(n){return e.excluir()}}})],1)])],1)],1)},a=[],s=o("d624"),r=o.n(s),i=(o("551c"),o("06db"),o("097d"),o("7f7f"),o("28a5"),o("9530")),c=o.n(i);function l(){var e=r()(["\n            query {\n              users {\n                id\n                name\n                sobrenome\n              }\n            }\n          "]);return l=function(){return e},e}function u(){var e=r()(["\n            query($id: ID!) {\n              users {\n                id\n                name\n                sobrenome\n              }\n              Empresa(id: $id) {\n                cnpj\n                razaoSocial\n                nomeFantasia\n                status\n                Endereco {\n                  id\n                  rua\n                  numero\n                  cidade\n                  estado\n                  cep\n                  complemento\n                  bairro\n                }\n                Telefone {\n                  numero\n                }\n                Responsavel {\n                  id\n                  name\n                  sobrenome\n                }\n                dataSuspensao\n              }\n            }\n          "]);return u=function(){return e},e}function d(){var e=r()(["\n                mutation(\n                  $cnpj: String!\n                  $razaoSocial: String!\n                  $nomeFantasia: String!\n                  $status: Status\n                  $dataSuspensao: Date\n                  $Endereco: EnderecoInput!\n                  $idResponsavel: Int!\n                  $Telefones: [TelefoneInput!]!\n                ) {\n                  createEmpresa(\n                    cnpj: $cnpj\n                    razaoSocial: $razaoSocial\n                    nomeFantasia: $nomeFantasia\n                    status: $status\n                    dataSuspensao: $dataSuspensao\n                    Endereco: $Endereco\n                    idResponsavel: $idResponsavel\n                    Telefones: $Telefones\n                  ) {\n                    id\n                  }\n                }\n              "]);return d=function(){return e},e}function p(){var e=r()(["\n                mutation(\n                  $id: ID!\n                  $cnpj: String!\n                  $razaoSocial: String!\n                  $nomeFantasia: String!\n                  $status: Status\n                  $dataSuspensao: Date\n                  $Endereco: EnderecoInputID\n                  $idResponsavel: Int!\n                  $Telefones: [TelefoneInput!]\n                ) {\n                  updateEmpresa(\n                    id: $id\n                    cnpj: $cnpj\n                    razaoSocial: $razaoSocial\n                    nomeFantasia: $nomeFantasia\n                    status: $status\n                    dataSuspensao: $dataSuspensao\n                    Endereco: $Endereco\n                    idResponsavel: $idResponsavel\n                    Telefones: $Telefones\n                  ) {\n                    id\n                  }\n                }\n              "]);return p=function(){return e},e}var m={props:["id"],data:function(){return{opcoes:"Dados",cnpj:"",razaoSocial:"",nomeFantasia:"",status:"",grupos:["Ativo","Inativo","Suspenso"],endereco:{},telefones:[{numero:""}],responsavelOptions:[],options:[],responsavel:"",date:null}},methods:{spinner:function(e){this.$store.dispatch("layout/setVisibleSpinner",e)},formDate:function(){return this.date.split("/").reduce((function(e,n,o,t){return 0==o?t[2]:1==o?"".concat(e,"-").concat(n):"".concat(e,"-").concat(t[0])}),0)},filterFn:function(e,n){var o=this;n((function(){if(""===e)o.options=o.responsavelOptions.map((function(e){return"".concat(e.name," ").concat(e.sobrenome)}));else{var n=e.toLowerCase();o.options=o.responsavelOptions.filter((function(e){var o="".concat(e.name," ").concat(e.sobrenome);return o.toLowerCase().indexOf(n)>-1})).map((function(e){return"".concat(e.name," ").concat(e.sobrenome)}))}}))},addTel:function(){this.telefones.push({numero:""})},removeTel:function(e){this.telefones.length>1&&this.telefones.splice(e,1)},salvar:function(){var e=this;if(this.telefones[0].numero.length<10||this.cnpj.length<14||this.razaoSocial.length<=3||this.nomeFantasia.length<=3||this.endereco.cep.length<8||this.endereco.cidade.length<3||this.endereco.estado.length<2||this.endereco.bairro.length<=3||this.endereco.rua.length<=3)this.$q.notify({color:"red",textColor:"white",message:"Por favor verefique os Dados!",position:"bottom-left",timeout:5e3*Math.random()+3e3});else{this.spinner(!0);var n=this.responsavel.toLowerCase(),o=this.responsavelOptions.filter((function(e){var o="".concat(e.name," ").concat(e.sobrenome);return o.toLowerCase().indexOf(n)>-1})).map((function(e){return e.id}));this.id?(delete this.endereco.__typename,this.$apollo.mutate({mutation:c()(p()),variables:{id:this.id,cnpj:this.cnpj,razaoSocial:this.razaoSocial,nomeFantasia:this.nomeFantasia,status:this.status,dataSuspensao:null!=this.date?this.formDate():null,Endereco:this.endereco,idResponsavel:o[0],Telefones:this.telefones.map((function(e){return{numero:e.numero}}))}}).then((function(n){e.$q.notify({color:"green",textColor:"white",message:"Empresa atualizada com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).catch((function(n){console.log("error! ",n),e.$q.notify({color:"red",textColor:"white",message:"Error ao atualizar empresa!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return e.spinner(!1)}))):this.$apollo.mutate({mutation:c()(d()),variables:{cnpj:this.cnpj,razaoSocial:this.razaoSocial,nomeFantasia:this.nomeFantasia,status:this.status,dataSuspensao:null!=this.date?this.formDate():null,Endereco:this.endereco,idResponsavel:o[0],Telefones:this.telefones}}).then((function(n){e.$q.notify({color:"green",textColor:"white",message:"Empresa Criada com Sucesso!",position:"bottom-left",timeout:5e3*Math.random()+3e3}),e.cnpj="",e.razaoSocial="",e.nomeFantasia="",e.status="",e.grupos=["Ativo","Inativo","Suspenso"],e.endereco={},e.telefones=[{numero:""}]})).catch((function(n){console.log("error! ",n),e.$q.notify({color:"red",textColor:"white",message:"Error ao Criar empresa!",position:"bottom-left",timeout:5e3*Math.random()+3e3})})).finally((function(){return e.spinner(!1)}))}}},mounted:function(){var e=this;if(this.spinner(!0),this.id){this.$apollo.query({query:c()(u()),variables:{id:this.id},fetchPolicy:"no-cache"}).then((function(n){e.responsavelOptions=n.data.users,e.cnpj=n.data.Empresa.cnpj,e.razaoSocial=n.data.Empresa.razaoSocial,e.nomeFantasia=n.data.Empresa.nomeFantasia,e.status=n.data.Empresa.status,e.endereco=n.data.Empresa.Endereco,e.telefones=n.data.Empresa.Telefone,e.responsavel="".concat(n.data.Empresa.Responsavel.name," ").concat(n.data.Empresa.Responsavel.sobrenome),e.date=n.data.Empresa.dataSuspensao.split("-").reduce((function(e,n,o,t){return 0==o?t[2]:1==o?"".concat(e,"/").concat(n):"".concat(e,"/").concat(t[0])}),0)})).catch((function(e){console.log(e)})).finally((function(){return e.spinner(!1)}));this.$store.getters["auth/getMe"].responsavel.filter((function(n){return e.id==n.id}))[0]}else this.$apollo.query({query:c()(l()),fetchPolicy:"no-cache"}).then((function(n){e.responsavelOptions=n.data.users,e.spinner(!1)}))}},f=m,h=o("2877"),v=o("eebe"),b=o.n(v),g=o("429b"),q=o("7460"),S=o("0378"),$=o("27f9"),C=o("0016"),k=o("ddd8"),y=o("9c40"),x=Object(h["a"])(f,t,a,!1,null,null,null);n["default"]=x.exports;b()(x,"components",{QTabs:g["a"],QTab:q["a"],QForm:S["a"],QInput:$["a"],QIcon:C["a"],QSelect:k["a"],QBtn:y["a"]})}}]);